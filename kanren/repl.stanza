
defpackage repl :
    import core
    import reader
    import typeof


defn eval (s-exp) :
    println("s-exp = %_" % [s-exp])

    if s-exp[0] == `+ :
        println("%_ + %_ = %_" % [s-exp[1], s-exp[2], s-exp[1] + s-exp[2]])
    else:
        println("Not +")

println("Hello there!  Welcome to the repl!")

while true:
    print("(\\\")> ")
    val form = unwrap-all(read-line(STANDARD-INPUT-STREAM))
    for s-exp in form do:
        eval(s-exp)
